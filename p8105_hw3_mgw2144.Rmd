---
title: "p8105_hw3_mgw2144"
output: github_document
date: "2023-10-11"
---

```{r}
library(tidyverse)
library(ggridges)
library(patchwork)
library(p8105.datasets)

knitr::opts_chunk$set(
  fig.width = 8,
  fig.height = 6,
  out.width = "90%"
)

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = ("viridis"))

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

## Problem 1 

## Problem 2 

```{r}
data("brfss_smart2010")

brfss_smart2010_df = 
  brfss_smart2010 %>% 
  janitor::clean_names() %>% 
  rename(
    state = locationabbr,
    state_county = locationdesc
  ) %>% 
  filter(topic == "Overall Health") %>% 
  filter(response %in% c("Excellent", "Very good", "Good", "Fair", "Poor")) %>% 
  mutate(
    response = factor(response, levels = c("Poor", "Fair", "Good", "Very good", "Excellent"), ordered = TRUE)) %>% 
  arrange(response)

```

Data was cleaned to re-format some variable names and clean the column names, focus on the "Overall Health" topic, include only participants whose answers ranged from "Excellent" to "Poor", and so that the responses were organized from "Poor" to "Excellent". 

### instructions 

In 2002, which states were observed at 7 or more locations? What about in 2010?

```{r}
brfss_2002 = 
  brfss_smart2010_df %>% 
  filter(year == "2002") %>% 
  count(state) %>% 
  filter(n >= 7)

brfss_2010 = 
  brfss_smart2010_df %>% 
  filter(year == "2010")%>% 
  count(state) %>% 
  filter(n >= 7)
```

In 2002, 21 states were observed at 7 or more locations including: CT, DE FL, ID, IL, IN, MA, MD, MI, NE, NH, NJ, NV, NY, OH, OK, PA, RI, SC, UT, and WA. 

In 2010, 38 states were observed at 7 or more locations including: AL, AR, AZ, CA, CO, DE FL, ID, IN, KS, LA, MA, MD, ME, MI, MN, MO, MT, NC, NE, NH, NJ, NM, NV, NY, OH, OK, OR, PA, RI, SC, SD, TN, TX, UT, VT, WA, and WY.

```{r}
brfss_exc = 
  brfss_smart2010_df %>% 
  filter(response == "Excellent") %>% 
  select(year, state, response, data_value) %>% 
  group_by(year, state) %>% 
  summarise(mean_dv = mean(data_value, na.rm = TRUE)) %>% 
  ggplot(aes(x = year, y = mean_dv, color = state)) +
    geom_point() + 
    geom_line() +
    labs(
      title = "Average Data Value Per State 2002-2010",
      x = "Year",
      y = "Average Data Value"
    )

ggsave("brfss_exc.pdf")
 
```

The result of this code is a "spaghetti" plot with one line for each state in the data set as is represented by the state abbreviation. Each data point connected by lines represents the average data value in percent for each year by state. The average data value is represented by the y-axis and the range of the graph on the y-axis is 10%-35%. Year is represented on the x-axis with a range of 2002-2010. 

```{r}
brfss_two = 
 brfss_smart2010_df%>% 
  filter(
    state == "NY", year %in% c(2006, 2010)) %>% 
  mutate(
    state_county = sub(" County", "", state_county),
    state_county = sub("NY - ", "", state_county)
  ) %>% 
ggplot(aes(x = response, y = data_value, fill = response))+
  geom_bar(stat = "identity")+
  facet_grid(state_county~year)+
  labs(
    x = "Response",
    y = "Average Data Value (%)",
    title = "Average Data Value For New York Counties in 2006 and 2010 by Response Type"
  )

ggsave("brfss_two.pdf")
```

## description

## Problem 3


